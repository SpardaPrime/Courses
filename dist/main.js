(()=>{"use strict";const e=async({get:e,blockL:t,left:o,right:n,row:c})=>{if(!document.querySelector(".section-dev"))return;const l=await fetch(e),a=await l.json(),s=document.getElementById(t),r=s.querySelectorAll(".section-dev-block"),i=s.querySelectorAll(".section-dev-img");let d=document.getElementById(o),u=document.getElementById(n),y=Math.round(s.offsetWidth/c);r.forEach((e=>e.style.width=y+"px")),i.forEach((e=>e.style.width=y+"px"));let m=0,g=r[0].offsetWidth,h=y*a-c*g;window.addEventListener("resize",(e=>{y=Math.round(s.offsetWidth/c),r.forEach((e=>e.style.width=y+"px")),i.forEach((e=>e.style.width=y+"px")),m=0,g=r[0].offsetWidth,h=g*a-c*g,s.scrollTo(0,0),0==m&&(d.style.display="none"),u.style.display=y*a==y*c?"none":"block"})),0==m&&(d.style.display="none"),y*a==y*c&&(u.style.display="none"),d.addEventListener("click",(()=>{m-=g,m<=0?(s.scrollTo(m,0),d.style.display="none"):(s.scrollTo(m,0),u.style.display="block")})),u.addEventListener("click",(()=>{m+=g,m>=h?(s.scrollTo(m,0),u.style.display="none"):(s.scrollTo(m,0),d.style.display="block")}))};if(document.getElementById("catalog-noauth")){if(document.addEventListener("click",(e=>{e.target.closest("#catalog-noauth")?document.getElementById("catalog-noauth-div").style.display="block":document.getElementById("catalog-noauth-div").style.display="none"})),document.querySelector(".text-area-area")){const e=document.querySelector(".text-area-area");document.addEventListener("click",(t=>{let o=t.target.closest(".text-area-area");if(!o)return void(e.style.height="120px");const n=o.scrollHeight;o.style.height=n+"px"}))}document.getElementById("btn-navbar-mobile").addEventListener("click",(function(){document.getElementById("navbar-mobile").classList.toggle("navbar-mobile-open")}))}!function(){const e=async()=>{const e=document.getElementById("cart-block"),t=await fetch("/cart/getcount"),o=await t.json();console.log(e),o&&(document.getElementById("cart")||(e.style.display="block",document.getElementById("cart-block-text").textContent=o))};(()=>{try{const e=document.querySelector(".search-item-panel");e.querySelector("form").addEventListener("submit",(t=>{e.querySelector("input").value||t.preventDefault()}))}catch(e){}})();const t=e=>{document.querySelectorAll(e).forEach((e=>{e.textContent=new Intl.NumberFormat("ukl",{currency:"uah",style:"currency"}).format(e.textContent)}))};document.querySelectorAll(".order-date").forEach((e=>{let t=new Date(e.textContent);e.textContent=new Intl.DateTimeFormat("ukl",{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)})),t(".price"),t(".span-total"),t(".p-span-price");const o=({cart:o},c)=>{let l=0;const a=o.items.map((({courseId:e,count:t})=>{console.log(e);const{title:o,price:n,img:a,_id:s}=e;return l+=t*n,`\n              <li class="collection-item cart">\n              <div><h5>${o}</h5></div>\n              <div><h5 class="price">${n}</h5></div>\n              <div><h5>${t}</h5></div>\n              <div><img class="cart-img" src="${a}" alt="${o}"></div>\n              <div>\n              <button class="add" data-id="${s}" data-csrf="${c}"><i class="material-icons">add</i></button>\n              <button class="del" data-id="${s}"  data-csrf="${c}"><i class="material-icons">remove</i></button>\n              </div>\n              </li>\n              `})).join("");n.querySelector(".main").innerHTML=a,n.querySelector(".total").textContent=l,t(".price"),t(".span-total"),t(".p-span-price"),document.getElementById("nav-cart")&&e()},n=document.querySelector("#cart");n&&(n.addEventListener("click",(e=>{let c=e.target.closest("button.del");if(!c)return;let l=c.dataset.id;const a=c.dataset.csrf;fetch("/cart/remove/"+l,{method:"delete",headers:{"X-XSRF-TOKEN":a}}).then((e=>e.json())).then((e=>{e.cart.items.length?(o(e,a),t()):n.innerHTML="<h2>No course</h2>"}))})),n.addEventListener("click",(e=>{let n=e.target.closest("button.add");if(!n)return;let c=n.dataset.id;const l=n.dataset.csrf;fetch("/cart/addone/"+c,{method:"PUT",headers:{"X-XSRF-TOKEN":l}}).then((e=>e.json())).then((e=>{o(e,l),t()}))}))),new URL("mongodb+srv://Roman:<69eHnmmp1CnxGqYh>@cluster0.zjws7.mongodb.net/<dbname>?retryWrites=true&w=majority"),M.Tabs.init(document.querySelector(".tabs")),document.getElementById("nav-cart")&&e(),document.addEventListener("click",(e=>{try{let t=e.target.closest(".account");if(!t)return void(document.querySelector(".account-div")&&(document.querySelector(".account-div").classList.remove("account-div-open"),document.querySelector(".shadow-page").style.display="none",document.querySelector(".account").classList.remove("zindex-102")));t.classList.add("zindex-102"),document.querySelector(".account-div").classList.add("account-div-open"),document.querySelector(".shadow-page").style.display="block"}catch(e){}})),document.addEventListener("click",(e=>{let t=e.target.closest(".catalog-navbar-li"),o=document.querySelector(".catalog-navbar"),n=document.querySelector(".shadow-page");t?(o.classList.add("catalog-navbar-open"),t.classList.add("zindex-102"),n.style.display="block"):o.classList.contains("catalog-navbar-open")&&(o.classList.remove("catalog-navbar-open"),document.querySelector(".catalog-navbar-li").classList.remove("zindex-102"),n.style.display="none")})),document.querySelector(".close-course-block")&&document.querySelector(".close-course-block").addEventListener("click",(function(e){window.close()}))}(),(async()=>{if(!document.querySelector(".index-container-carts"))return;const e=await(async()=>{const e=await fetch("/course");return await e.json()})(),t=document.querySelector(".index-container-carts"),o=document.querySelector(".index-count-page");let n=t.scrollHeight,c=n/e.length,l=1;const a=e.length;o.textContent=`${l}/${a}`;const s=document.querySelector(".index-container-carts").querySelectorAll(".index-cart");s.forEach((e=>e.classList.add("opacity0"))),s[0].classList.add("opacity1");let r=setTimeout((function e(){d(),r=setTimeout(e,3e3)}),3e3);document.querySelector("#carousel-pause > i").addEventListener("click",(e=>{clearTimeout(r),document.querySelector("#carousel-pause").style.display="none",document.querySelector("#carousel-play").style.display="block"})),document.querySelector("#carousel-play > i").addEventListener("click",(e=>{r=setTimeout((function e(){d(),r=setTimeout(e,3e3)}),3e3),document.querySelector("#carousel-play").style.display="none",document.querySelector("#carousel-pause").style.display="block"})),window.addEventListener("resize",(()=>{n=t.scrollHeight,c=Math.floor(n/e.length),s.forEach((e=>e.style.height=c+"px")),s[l-1].classList.add("opacity1"),t.scrollTo(0,(l-1)*c),o.textContent=`${l}/${a}`}));const i=e=>{s.forEach((e=>e.classList.remove("opacity1"))),s[e-1].classList.add("opacity1")},d=()=>{if(l===a)return l=1,o.textContent=`${l}/${a}`,i(l),void t.scrollTo(0,0);l++,o.textContent=`${l}/${a}`,i(l),t.scrollBy({left:0,top:c})};document.getElementById("carousel-btn-up").addEventListener("click",(()=>{if(1===l)return l=a,o.textContent=`${l}/${a}`,i(l),void t.scrollTo(0,c*l);l--,o.textContent=`${l}/${a}`,i(l),t.scrollBy(0,-c)})),document.getElementById("carousel-btn-down").addEventListener("click",d)})(),e({get:"/sectionDev",blockL:"section-dev-id",left:"dev-left-btn",right:"dev-right-btn",row:3}),e({get:"/sectionBus",blockL:"section-Business",left:"busi-left-btn",right:"busi-right-btn",row:3}),e({get:"/sectionDesign",blockL:"section-design",left:"design-left-btn",right:"design-right-btn",row:3}),e({get:"/sectionMusic",blockL:"section-music",left:"music-left-btn",right:"music-right-btn",row:3}),e({get:"/latestAded",blockL:"section-latest",left:"latest-left-btn",right:"latest-right-btn",row:3})})();
//# sourceMappingURL=main.js.map